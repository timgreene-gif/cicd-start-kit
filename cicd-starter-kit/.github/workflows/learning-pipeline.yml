# ğŸ“ LEARNING PIPELINE - Start Here!
# This workflow teaches CI/CD basics step by step

name: Learning Pipeline

# TRIGGER: When does this run?
# This runs on every push to main, OR when you manually trigger it
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:  # Allows manual trigger from Actions tab

jobs:
  # JOB 1: The basics
  learn-the-basics:
    name: "ğŸ“š Step 1 - Understand the Basics"
    runs-on: ubuntu-latest  # This is a free Linux VM GitHub gives you
    
    steps:
      # Each step is a task. They run in order.
      
      - name: "ğŸ‘‹ Hello World"
        run: echo "Hello Tim! Your first CI/CD pipeline is running!"
      
      - name: "ğŸ–¥ï¸ What machine are we on?"
        run: |
          echo "Operating System:"
          uname -a
          echo ""
          echo "Current directory:"
          pwd
          echo ""
          echo "Date/Time:"
          date
      
      - name: "ğŸ“¦ Checkout your code"
        uses: actions/checkout@v4
        # This downloads YOUR repo code into the runner
      
      - name: "ğŸ“‚ See your files"
        run: |
          echo "Here are the files in your repo:"
          ls -la
  
  # JOB 2: Learn about dependencies
  learn-dependencies:
    name: "ğŸ“š Step 2 - Dependencies & Environment"
    runs-on: ubuntu-latest
    needs: learn-the-basics  # This job waits for the first one
    
    steps:
      - name: "ğŸ Setup Python"
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: "âœ… Verify Python"
        run: |
          python --version
          pip --version
      
      - name: "ğŸ’¡ Key Insight"
        run: |
          echo "============================================"
          echo "ğŸ§  WHAT YOU LEARNED:"
          echo "--------------------------------------------"
          echo "1. Workflows are YAML files in .github/workflows/"
          echo "2. Jobs run on fresh VMs (called 'runners')"
          echo "3. Steps execute commands or use pre-built 'actions'"
          echo "4. 'needs' creates dependencies between jobs"
          echo "============================================"

  # JOB 3: Simulate a real pipeline
  simulate-real-pipeline:
    name: "ğŸš€ Step 3 - Real Pipeline Simulation"
    runs-on: ubuntu-latest
    needs: learn-dependencies
    
    steps:
      - name: "ğŸ“¦ Checkout"
        uses: actions/checkout@v4
      
      - name: "ğŸ” Lint (Check Code Quality)"
        run: echo "âœ… Linting passed! (In real life, this runs tools like flake8, eslint)"
      
      - name: "ğŸ§ª Test (Run Unit Tests)"
        run: echo "âœ… All 42 tests passed! (In real life, this runs pytest, jest, etc.)"
      
      - name: "ğŸ—ï¸ Build (Create Deployable Package)"
        run: echo "âœ… Build complete! (In real life, this compiles code or creates artifacts)"
      
      - name: "ğŸš€ Deploy (Ship It!)"
        run: |
          echo "âœ… Deployed to staging!"
          echo ""
          echo "ğŸ‰ CONGRATULATIONS!"
          echo "You just simulated a full CI/CD pipeline!"
          echo ""
          echo "NEXT STEPS:"
          echo "1. Look at python-ci.yml for a REAL Python pipeline"
          echo "2. Look at web-ci.yml for web deployment"
          echo "3. Break something on purpose and watch it fail!"
